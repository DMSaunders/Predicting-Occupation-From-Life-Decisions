= Predicting Occupation Based on Life Decisions: An agile data science approach
:idprefix:
:idseparator: -
:sectanchors:
:sectlinks:
:sectnumlevels: 6
:sectnums:
:icons: font
ifdef::env-github[]
:imagesdir: https://github.com/DMSaunders/Predicting-Occupation-From-Life-Decisions/blob/master/images
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]
:toc: macro
:toclevels: 6
:toc-title: 

toc::[]


## Purpose: What impact do our choices have on our occupations?
*Actionable Research Question: What are the strongest predictors of a person's occupation among all the features an individual can control included in the 2017 U.S. Census Bureau Data?*

The "Freewill" Features:

* College Major
* Educational Attainment
* Location
* Military Service
* English Fluency
* Precise Marital Status
* Number of Times Married
* Relationship within Household*
* Working in Private vs Public Sector vs Self-Employed

Many projects have explored the effects of these features on individuals' reported income. I'm looking at individuals' occupation since it also contributes to well-being, especially when there is a good job fit with the individual. As the end goal for this project, it would be ideal if young adults could enter their desired occupation into a web app and see its most predictive features as a suggestion of paths others have successfully taken to that occupation. This is proposed as "tried and true" rather than optimal. The site would also address correlations between these controllable predictors and uncontrollable demographics like wealth and race and emphasize that the best way to change entrenched patterns is to focus on what you have the power to change.

##  Tech Stack & Data Source

image:pandas.jpg[pandas] image:scikit.png[scikit] image:matplot.png[matplot] image:Jupyter-logo.png[jupyter] image:ec2.png[ec2]

Coded in Python including Pandas, scikit-learn, and matplotlib. Challenged by runtime while gridsearching models, minimal tuning gains, and feature selection. Learned to run pipelines and fire up a model in Jupyter on an AWS EC2 instance in 7 minutes. 

The American Community Survey Public Use Microdata Sample provides anonymized individuals' data in the amount of about 1% of each state's population each year, which is incredible. The tables have around 200 features on these individuals, including demographic information such as handicap, insurance, income, language spoken, citizenship, working hours, and more. See the https://github.com/DMSaunders/Predicting-Occupation-From-Life-Decisions/blob/master/resources/PUMS_Data_Dictionary_2017.csv[Data Dictionary] starting from row 1145 for examples of the features.

## Method
As an agile data science approach, I defined a minimum viable product to reduce the CRISP-DM cycle to the shortest length for me to assess whether the project is worthwhile and avoid cleaning data or tuning models that do not suit the objective. This involved selecting the latest survey for a single state.

I hypothesized that I would find the most signal in looking first at the predictive power of education features on each of the 2010 Standard Occupational Classification's (https://www.bls.gov/soc/soc_2010_user_guide.pdf[SOC]) Major occupation groups. I examined the homogeneity of the major occupation groups to feel out whether they could be meaningfully predicted. For example, I was concerned 'Management' included both retail managers and executives, which are disparate, but the SOC has grouped first-line supervisors into their related groups. For this reason I decided not to cluster a new target to represent occupation on this first pass, since I think this target is adequate. Here is the distribution:

image::https://github.com/DMSaunders/Predicting-Occupation-From-Life-Decisions/blob/master/images/young_cal_occp_barh.png[young californians occupations] 

This compares educational attainment and major occupation group. The x-axis is roughly ordinal. I will later make an approximately ratio version of attainment where x = 1 year.

image::violin_eduattain_majsocp_ord.png[violin plot]

Clearly some occupations involve more schooling, as expected. Here's how I scoped the project down:

image::galv_capstone.jpeg[process flow]


## Results:

I ran a "dumb" untrained model for predicting occupations based only on the education features to establish a baseline on which to improve. Given my test f1 scores below, education did not appear to be predictive of certain occupations like sales and healthcare support, while it was predictive of Engineering and Computer Science and Math occupations. I chose F1-score as a metric which describes the balance between my true positive rate and my precision. If I were predicting doctor vs not a doctor: 'How many of all the doctors did I identify', balanced with 'how many that I identified as doctors were really doctors'? This can be advantageous over accuracy as a metric for imbalanced classes, which I demonstrate having in the chart of occupation groups, since I can achieve 98% accuracy simply by predicting that no one is a doctor, however my f1-score would be low.

image::dumb-untuned-tree-3-features-2018-11-13.png[dumb metrics]

I examined the Computer and Math occupation as a target before pursuing the full project since it was promising. Of 8 different classification models, tree-based learning scored best across metrics. Although I found the majority of predictive power in the education variables of undergraduate major and educational attainment, location may be nearly as important as having a CS degree. 

image:ROC_occp15_tunedrf_edu.png[roc1] image:ROC_occp15_tunedrf_freewill.png[roc2] 

image::partialdep_gradboost_occp15.png[partial dependences]

Working in for-profit sector and English fluency also appeared to matter. As next steps I may improve dimensionality reduction, engineer more features, and create an only-women model which can take into account features like children which could not be part of the current dataset since it would cause leakage of gender as a feature. 





## Alternate Goal
Users enter their desired occupation and their demographic information and I run a model for them, which outputs a predicted likelihood of of that person being that occupation. I present appropriate resources based on the likelihood, for example more supportive vs more accelerated, and recommend actions corresponding to the features that the individual can control. Some occupations, for example sales and healthcare support, will not likely recommed increased educational achievement in the form of degrees, since I found little support for that relationship so far.

*For each individual, I have their relationship to the survey-taker, including family relationships like stepson and non-family ones like housemate or boarder. This feature needs some engineering. I surmise that someone can change their living situation by moving into a different household, allowing this to be a 'freewill feature'.

https://github.com/DMSaunders/Predicting-Occupation-From-Life-Decisions/blob/master/reports/Predicting%20Occupation%20Based%20on%20Life%20Decisions%20(abridged).pdf[See slides here]